(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{629:function(a,t,s){"use strict";s.r(t);var r=s(2),e=Object(r.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("使用 "),t("strong",[a._v("Arthas")]),a._v(" 来获取容器中运行的 Java 应用的火焰图是一个非常有效的方法来分析应用的性能瓶颈。"),t("strong",[a._v("Arthas")]),a._v(" 是阿里巴巴开源的一个 Java 诊断工具，特别适合用于运行中的 Java 应用进行实时监控和分析。以下是关于如何使用 Arthas 获取容器中 Java 应用火焰图的详细步骤。")]),a._v(" "),t("p",[a._v("如果你在宿主机上已经下载了 Arthas 的 jar 包，你可以将这个 jar 包通过 Docker 的文件拷贝工具传入到正在运行的容器中。以下是将 Arthas jar 文件传入 Docker 容器的详细步骤。")]),a._v(" "),t("h3",{attrs:{id:"_1-准备-arthas-jar-包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-准备-arthas-jar-包"}},[a._v("#")]),a._v(" 1. "),t("strong",[a._v("准备 Arthas jar 包")])]),a._v(" "),t("p",[a._v("假设你已经在宿主机上下载好了 Arthas 的 jar 包，比如文件名为 "),t("code",[a._v("arthas-boot.jar")]),a._v("，并且它位于宿主机的某个目录（例如 "),t("code",[a._v("/home/user/arthas")]),a._v("）。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v(" https://arthas.aliyun.com/arthas-boot.jar\n")])])]),t("h3",{attrs:{id:"_2-使用-docker-拷贝工具-docker-cp-传输文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-docker-拷贝工具-docker-cp-传输文件"}},[a._v("#")]),a._v(" 2. "),t("strong",[a._v("使用 Docker 拷贝工具 ("),t("code",[a._v("docker cp")]),a._v(") 传输文件")])]),a._v(" "),t("p",[t("code",[a._v("docker cp")]),a._v(" 是 Docker 提供的命令，用于在宿主机和 Docker 容器之间拷贝文件。假设你的 Docker 容器 ID 为 "),t("code",[a._v("<container-id>")]),a._v("，你可以使用以下命令将 "),t("code",[a._v("arthas-boot.jar")]),a._v(" 传入容器中。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /home/user/arthas/arthas-boot.jar "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("container-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/opt/arthas-boot.jar\n")])])]),t("ul",[t("li",[t("strong",[a._v("参数说明")]),a._v("：\n"),t("ul",[t("li",[t("code",[a._v("/home/user/arthas/arthas-boot.jar")]),a._v("：宿主机上 "),t("code",[a._v("arthas-boot.jar")]),a._v(" 的路径。")]),a._v(" "),t("li",[t("code",[a._v("<container-id>")]),a._v("：目标 Docker 容器的 ID（你可以用 "),t("code",[a._v("docker ps")]),a._v(" 获取容器 ID）。")]),a._v(" "),t("li",[t("code",[a._v("/opt/arthas-boot.jar")]),a._v("：这是你希望将 "),t("code",[a._v("arthas-boot.jar")]),a._v(" 放入容器的目标路径。在这里选择了 "),t("code",[a._v("/opt")]),a._v(" 目录，你可以根据自己的需求选择其他位置。")])])])]),a._v(" "),t("h3",{attrs:{id:"_3-进入容器内部"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-进入容器内部"}},[a._v("#")]),a._v(" 3. "),t("strong",[a._v("进入容器内部")])]),a._v(" "),t("p",[a._v("拷贝完成后，你需要进入 Docker 容器内部来执行 "),t("code",[a._v("arthas-boot.jar")]),a._v("。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("container-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /bin/bash\n")])])]),t("ul",[t("li",[t("strong",[t("code",[a._v("<container-id>")])]),a._v(" 替换为你的容器 ID。")])]),a._v(" "),t("p",[a._v("进入到容器内部后，你就可以看到 "),t("code",[a._v("/opt/arthas-boot.jar")]),a._v(" 文件。")]),a._v(" "),t("h3",{attrs:{id:"_4-启动-arthas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动-arthas"}},[a._v("#")]),a._v(" 4. "),t("strong",[a._v("启动 Arthas")])]),a._v(" "),t("p",[a._v("在容器内部启动 Arthas，连接到 Java 应用程序。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" /opt/arthas-boot.jar\n")])])]),t("p",[a._v("当你运行这个命令后，Arthas 会列出当前容器中所有正在运行的 Java 进程。你可以选择要分析的进程的 "),t("strong",[a._v("PID")]),a._v("。")]),a._v(" "),t("h3",{attrs:{id:"_5-分析火焰图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-分析火焰图"}},[a._v("#")]),a._v(" 5. "),t("strong",[a._v("分析火焰图")])]),a._v(" "),t("p",[a._v("在连接到目标 Java 进程后，你可以使用 "),t("code",[a._v("profiler")]),a._v(" 命令来生成火焰图。")]),a._v(" "),t("ul",[t("li",[t("p",[t("strong",[a._v("开始性能采样")]),a._v("：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("profiler start\n")])])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("等待一段时间（例如 30 秒）后，停止采样并生成火焰图")]),a._v("：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("profiler stop\n")])])])])]),a._v(" "),t("p",[a._v("停止后，Arthas 会自动生成火焰图的 "),t("code",[a._v(".svg")]),a._v(" 文件，通常位于 "),t("code",[a._v("arthas-output")]),a._v(" 目录下，比如路径可能是 "),t("code",[a._v("/root/arthas-output/xxx.svg")]),a._v("。")]),a._v(" "),t("h3",{attrs:{id:"_6-将火焰图拷贝到宿主机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-将火焰图拷贝到宿主机"}},[a._v("#")]),a._v(" 6. "),t("strong",[a._v("将火焰图拷贝到宿主机")])]),a._v(" "),t("p",[a._v("你可以使用 "),t("code",[a._v("docker cp")]),a._v(" 命令将生成的火焰图从容器中拷贝到宿主机上，方便你使用浏览器进行查看。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("container-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/root/arthas-output/xxx.svg /home/user/arthas/\n")])])]),t("ul",[t("li",[t("strong",[a._v("参数说明")]),a._v("：\n"),t("ul",[t("li",[t("code",[a._v("<container-id>")]),a._v("：目标 Docker 容器的 ID。")]),a._v(" "),t("li",[t("code",[a._v("/root/arthas-output/xxx.svg")]),a._v("：在容器中生成的火焰图文件的路径。")]),a._v(" "),t("li",[t("code",[a._v("/home/user/arthas/")]),a._v("：宿主机上的目标目录。")])])])]),a._v(" "),t("h3",{attrs:{id:"_7-使用浏览器查看火焰图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-使用浏览器查看火焰图"}},[a._v("#")]),a._v(" 7. "),t("strong",[a._v("使用浏览器查看火焰图")])]),a._v(" "),t("p",[a._v("拷贝出来的 "),t("code",[a._v(".svg")]),a._v(" 文件可以直接用浏览器打开，浏览器能够很好地渲染 SVG 格式，可以帮助你直观地分析系统性能瓶颈。")]),a._v(" "),t("h3",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),t("ol",[t("li",[t("p",[t("strong",[a._v("将 Arthas jar 包传入容器")]),a._v("：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /home/user/arthas/arthas-boot.jar "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("container-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/opt/arthas-boot.jar\n")])])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("进入容器内部并启动 Arthas")]),a._v("：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("container-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /bin/bash\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" /opt/arthas-boot.jar\n")])])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("生成火焰图")]),a._v("：")]),a._v(" "),t("ul",[t("li",[a._v("开始采样："),t("code",[a._v("profiler start")])]),a._v(" "),t("li",[a._v("停止采样并生成火焰图："),t("code",[a._v("profiler stop")])])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("将火焰图从容器中拷贝到宿主机")]),a._v("：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("container-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(":/root/arthas-output/xxx.svg /home/user/arthas/\n")])])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("使用浏览器查看火焰图")]),a._v("。")])])]),a._v(" "),t("p",[t("strong",[a._v("补充: 应用为k8s相关技术栈")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# kubectl cp /root/arthas-boot.jar viewer-service-5b6b965f9-447ql:/opt/arthas-boot.jar -n performance")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# kubectl exec -it viewer-service-5b6b965f9-447ql   -n performance sh")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入容器")]),a._v("\nroot@viewer-service-5b6b965f9-447ql:/opt"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# /opt/java/openjdk/bin/java -jar /opt/arthas-boot.jar ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" JAVA_HOME: /opt/java/openjdk/jre\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" arthas-boot version: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.7")]),a._v(".1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Found existing "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" process, please choose one and input the serial number of the process, eg "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(". Then hit ENTER.\n* "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" server-0.0.1-SNAPSHOT.jar\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Start download arthas from remote server: https://arthas.aliyun.com/download/4.0.2?mirror"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("aliyun\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" File size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.27")]),a._v(" MB, downloaded size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.86")]),a._v(" MB, downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" File size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.27")]),a._v(" MB, downloaded size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6.26")]),a._v(" MB, downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" File size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.27")]),a._v(" MB, downloaded size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8.54")]),a._v(" MB, downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" File size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.27")]),a._v(" MB, downloaded size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("11.27")]),a._v(" MB, downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" File size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15.27")]),a._v(" MB, downloaded size: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14.02")]),a._v(" MB, downloading "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Download arthas success.\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" arthas home: /root/.arthas/lib/4.0.2/arthas\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Try to attach process "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v("\nPicked up JAVA_TOOL_OPTIONS: \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Attach process "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" success.\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("INFO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" arthas-client connect "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3658")]),a._v("\n  ,---.  ,------. ,--------.,--.  ,--.  ,---.   ,---.                           \n /  O  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  .--. "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),a._v("--.  .--"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'|  '")]),a._v("--"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'  | /  O  \\ '")]),a._v("   .-"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'                          \n|  .-.  ||  '")]),a._v("--"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.'")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  .--.  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v("  .-.  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("-.                          \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(".-"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'    |                         \n`--'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("--'"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("--"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),a._v("--"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'   `--'")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("--'  "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("--"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'`--'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("--'"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("-----"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'                          \n\nwiki       https://arthas.aliyun.com/doc                                        \ntutorials  https://arthas.aliyun.com/doc/arthas-tutorials.html                  \nversion    4.0.2                                                                \nmain_class                                                                      \npid        8                                                                    \ntime       2024-10-29 15:12:46.384                                              \n\n[arthas@8]$ profiler start \nProfiling started\n[arthas@8]$ profiler stop\nOK\nprofiler output file: /usr/local/arthas-output/20241029-151325.html\n[arthas@8]$ \n[arthas@8]$ exit\nroot@viewer-service-5b6b965f9-447ql:/opt# \nroot@viewer-service-5b6b965f9-447ql:/opt# exit\nexit\n# exit \n\n\n# 退出到宿主机\n[root@master ~]# \n[root@master ~]# kubectl cp viewer-service-5b6b965f9-447ql:/usr/local/arthas-output/20241029-151325.html /root/20241029-151325.html -n performance\ntar: Removing leading `/'")]),a._v(" from member names\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ll")]),a._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("264")]),a._v("\n-rw-r--r--  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("120795")]),a._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("29")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":18 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("20241029")]),a._v("-151325.html\n-rw-------. "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" root root   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1268")]),a._v(" Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("27")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2023")]),a._v(" anaconda-ks.cfg\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("142141")]),a._v(" Jun "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("26")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(":33 arthas-boot.jar\ndrwxr-xr-x  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" root root     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("72")]),a._v(" Oct "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":15 monitor\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@master ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n\n")])])]),t("div",{staticClass:"language-txt extra-class"},[t("pre",{pre:!0,attrs:{class:"language-txt"}},[t("code",[a._v('为什么出现  "tar: Removing leading `/\' from member names"  这个提示\n原因：kubectl cp 使用 tar 在 Pod 和宿主机之间传输文件。Kubernetes 中，kubectl cp 实际上在后台会调用 tar 命令来压缩和解压文件。这个信息表示 tar 在处理路径时去掉了 / 这个根目录前缀，以防止生成绝对路径的文件。\n影响：这种提示一般是无害的，不会影响文件的实际拷贝过程。\n')])])]),t("p",[a._v("通过这些步骤，你可以成功在容器中使用 Arthas 来分析 Java 应用的性能，生成火焰图以便找出系统的性能瓶颈。")])])}),[],!1,null,null,null);t.default=e.exports}}]);