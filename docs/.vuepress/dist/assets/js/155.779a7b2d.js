(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{582:function(a,t,v){"use strict";v.r(t);var _=v(2),s=Object(_.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"性能瓶颈定位思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#性能瓶颈定位思路"}},[a._v("#")]),a._v(" 性能瓶颈定位思路")]),a._v(" "),t("p",[a._v("本文摘抄自<企业性能测试: 体系构建, 落地指导与案例解读>")]),a._v(" "),t("h2",{attrs:{id:"接口响应慢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#接口响应慢"}},[a._v("#")]),a._v(" 接口响应慢")]),a._v(" "),t("h3",{attrs:{id:"是否与数据库交互导致耗时长"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#是否与数据库交互导致耗时长"}},[a._v("#")]),a._v(" 是否与数据库交互导致耗时长")]),a._v(" "),t("ol",[t("li",[a._v("慢SQL长时间占用连接")]),a._v(" "),t("li",[a._v("业务逻辑中有频繁访问数据库的情况")]),a._v(" "),t("li",[a._v("连接池设置过小")]),a._v(" "),t("li",[a._v("数据库服务器硬件配置过低也是访问数据库耗时长的原因")])]),a._v(" "),t("h3",{attrs:{id:"是否与redis交互导致耗时长"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#是否与redis交互导致耗时长"}},[a._v("#")]),a._v(" 是否与Redis交互导致耗时长")]),a._v(" "),t("ol",[t("li",[a._v("慢查询")]),a._v(" "),t("li",[a._v("访问Redis频率过高")]),a._v(" "),t("li",[a._v("受连接池大小限制")]),a._v(" "),t("li",[a._v("Redis硬件配置低")])]),a._v(" "),t("h3",{attrs:{id:"是不是消息队列谁送消息慢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#是不是消息队列谁送消息慢"}},[a._v("#")]),a._v(" 是不是消息队列谁送消息慢")]),a._v(" "),t("h3",{attrs:{id:"是不是其他业务方法慢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#是不是其他业务方法慢"}},[a._v("#")]),a._v(" 是不是其他业务方法慢")]),a._v(" "),t("ol",[t("li",[a._v("是否有所竞争导致的县城阻塞等待")]),a._v(" "),t("li",[a._v("是否使用了CountDounLatch, CyclicBarrier, Thread.join. Object.wait等跨线程同步的方法")]),a._v(" "),t("li",[a._v("是否使用了正则表达式")]),a._v(" "),t("li",[a._v("是否有线程池耗尽现象")])]),a._v(" "),t("h2",{attrs:{id:"资源消耗不高-tps无法提升"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#资源消耗不高-tps无法提升"}},[a._v("#")]),a._v(" 资源消耗不高, TPS无法提升")]),a._v(" "),t("h3",{attrs:{id:"内部瓶颈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内部瓶颈"}},[a._v("#")]),a._v(" 内部瓶颈")]),a._v(" "),t("p",[a._v("线程阻塞严重, , 线程池耗尽")]),a._v(" "),t("h2",{attrs:{id:"tps逐渐降低"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tps逐渐降低"}},[a._v("#")]),a._v(" TPS逐渐降低")]),a._v(" "),t("ol",[t("li",[a._v("内存泄露")]),a._v(" "),t("li",[a._v("表数据量变大")]),a._v(" "),t("li",[a._v("磁盘满")])]),a._v(" "),t("h2",{attrs:{id:"响应时间-tps尖刺"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#响应时间-tps尖刺"}},[a._v("#")]),a._v(" 响应时间/TPS尖刺")]),a._v(" "),t("ol",[t("li",[a._v("缓存击穿")]),a._v(" "),t("li",[a._v("GC停顿时间长\nGC回收效果差, GC线程数过小, 对内存过大, 网卡积压, 服务器上其他进程导致资源争用, 宿主机资源争用或资源超分")])]),a._v(" "),t("h2",{attrs:{id:"错误类型多-错误率高"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#错误类型多-错误率高"}},[a._v("#")]),a._v(" 错误类型多, 错误率高")]),a._v(" "),t("ol",[t("li",[a._v("限流导致报错")]),a._v(" "),t("li",[a._v("代码跑一场")]),a._v(" "),t("li",[a._v("网络或连接异常")]),a._v(" "),t("li",[a._v("服务器可用端口不足")])]),a._v(" "),t("h2",{attrs:{id:"资源指标异常"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#资源指标异常"}},[a._v("#")]),a._v(" 资源指标异常")]),a._v(" "),t("h3",{attrs:{id:"cpu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu"}},[a._v("#")]),a._v(" CPU")]),a._v(" "),t("ol",[t("li",[a._v("死循环导致CPU耗尽")]),a._v(" "),t("li",[a._v("爬栈导致CPU消耗高")]),a._v(" "),t("li",[a._v("频繁抛一擦会给你导致CPU消耗高")]),a._v(" "),t("li",[a._v("正则匹配和正则替换")]),a._v(" "),t("li",[a._v("加密和解密操作")]),a._v(" "),t("li",[a._v("其他导致CPU消耗的操作")])]),a._v(" "),t("h3",{attrs:{id:"内存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内存"}},[a._v("#")]),a._v(" 内存")]),a._v(" "),t("ol",[t("li",[a._v("内存增长快")]),a._v(" "),t("li",[a._v("内存泄露")])]),a._v(" "),t("h3",{attrs:{id:"磁盘io"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#磁盘io"}},[a._v("#")]),a._v(" 磁盘IO")]),a._v(" "),t("ol",[t("li",[a._v("写业务日志")]),a._v(" "),t("li",[a._v("读写其他业务文件")])]),a._v(" "),t("h3",{attrs:{id:"网络io"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#网络io"}},[a._v("#")]),a._v(" 网络IO")]),a._v(" "),t("ol",[t("li",[a._v("云服务有贷款限制")]),a._v(" "),t("li",[a._v("异地多机房走专项, 可能会有网络带宽瓶颈")]),a._v(" "),t("li",[a._v("网卡积压问题")])]),a._v(" "),t("h2",{attrs:{id:"快速定位复杂系统容量瓶颈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快速定位复杂系统容量瓶颈"}},[a._v("#")]),a._v(" 快速定位复杂系统容量瓶颈")]),a._v(" "),t("ol",[t("li",[a._v("查看容量测试那些接口的响应时间的增长斜率较大, 在不断增加压力时, 如果某个接口的关联资源已经成为瓶颈, 那么他的响应时间的增长斜率(或者错误斜率)会明显大于其他接口")]),a._v(" "),t("li",[a._v("如果有多个慢接口, 那就需要梳理慢接口的链路拓扑图并取其交集, 交集内的节点成为瓶颈的概率一定是高于交集外的, 这些节点需要重点关注. 接下来和第一点的思路类似, 已知某个接口是瓶颈后, 就要进行单接口瓶颈定位了.")]),a._v(" "),t("li",[a._v("在复杂系统下, 除了服务自身的性能问题以及中间件, 数据库的性能外, 还需要注意是都存在负载不均的问题, 对此需要选择合理的负载均衡策略.")])])])}),[],!1,null,null,null);t.default=s.exports}}]);