(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{605:function(t,s,a){"use strict";a.r(s);var r=a(2),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("如果要查看某个域名在 "),s("strong",[t._v("HTTP 层的延迟")]),t._v("，需要测量从客户端发送 HTTP 请求到接收到服务器响应的时间。这涉及 DNS 解析、TCP 连接建立、HTTP 请求发送、响应接收等多个阶段。以下是实现方法的多种工具和步骤：")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_1-使用-curl-查看-http-延迟"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用-curl-查看-http-延迟"}},[t._v("#")]),t._v(" "),s("strong",[t._v("1. 使用 "),s("code",[t._v("curl")]),t._v(" 查看 HTTP 延迟")])]),t._v(" "),s("h4",{attrs:{id:"单次请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单次请求"}},[t._v("#")]),t._v(" "),s("strong",[t._v("单次请求")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" /dev/null "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Total Time: %{time_total}s'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(" http://example.com\n")])])]),s("ul",[s("li",[s("strong",[t._v("参数解析")]),t._v("：\n"),s("ul",[s("li",[s("code",[t._v("-o /dev/null")]),t._v("：丢弃输出内容，只关注时间。")]),t._v(" "),s("li",[s("code",[t._v("-s")]),t._v("：静默模式，不显示进度条。")]),t._v(" "),s("li",[s("code",[t._v("%{time_total}")]),t._v("：显示从请求到响应完成的总时间。")])])])]),t._v(" "),s("h4",{attrs:{id:"细化请求各阶段时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#细化请求各阶段时间"}},[t._v("#")]),t._v(" "),s("strong",[t._v("细化请求各阶段时间")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" /dev/null "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DNS Lookup: %{time_namelookup}s'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("TCP Connect: %{time_connect}s"),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("Server Processing: %{time_starttransfer}s"),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("Total Time: %{time_total}s"),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(" http://example.com\n")])])]),s("ul",[s("li",[s("p",[s("strong",[t._v("输出示例")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("DNS Lookup: 0.025s\nTCP Connect: 0.120s\nServer Processing: 0.350s\nTotal Time: 0.472s\n")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("关键指标")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("DNS Lookup")]),t._v("：域名解析时间。")]),t._v(" "),s("li",[s("strong",[t._v("TCP Connect")]),t._v("：TCP 三次握手时间。")]),t._v(" "),s("li",[s("strong",[t._v("Server Processing")]),t._v("：服务器处理并开始返回数据的时间。")]),t._v(" "),s("li",[s("strong",[t._v("Total Time")]),t._v("：完整的 HTTP 请求处理总时间。")])])])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_2-使用-wget-查看-http-延迟"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-wget-查看-http-延迟"}},[t._v("#")]),t._v(" "),s("strong",[t._v("2. 使用 "),s("code",[t._v("wget")]),t._v(" 查看 HTTP 延迟")])]),t._v(" "),s("h4",{attrs:{id:"测试总延迟"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试总延迟"}},[t._v("#")]),t._v(" "),s("strong",[t._v("测试总延迟")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--spider")]),t._v(" --server-response "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" log.txt http://example.com\n")])])]),s("ul",[s("li",[s("strong",[t._v("参数解析")]),t._v("：\n"),s("ul",[s("li",[s("code",[t._v("--spider")]),t._v("：只发送请求，不下载内容。")]),t._v(" "),s("li",[s("code",[t._v("--server-response")]),t._v("：打印服务器响应头。")]),t._v(" "),s("li",[s("code",[t._v("-o log.txt")]),t._v("：将日志保存到文件。")])])])]),t._v(" "),s("h4",{attrs:{id:"查看日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看日志"}},[t._v("#")]),t._v(" "),s("strong",[t._v("查看日志")])]),t._v(" "),s("p",[t._v("检查 "),s("code",[t._v("log.txt")]),t._v("，找到以下信息：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Resolving example.com... 93.184.216.34\nConnecting to example.com|93.184.216.34|:80... connected.\nHTTP request sent, awaiting response... 200 OK\n")])])]),s("p",[t._v("记录每个步骤的时间点，估算延迟。")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_3-使用-traceroute-和-httping"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用-traceroute-和-httping"}},[t._v("#")]),t._v(" "),s("strong",[t._v("3. 使用 "),s("code",[t._v("traceroute")]),t._v(" 和 "),s("code",[t._v("HTTPing")])])]),t._v(" "),s("h4",{attrs:{id:"使用-httping"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-httping"}},[t._v("#")]),t._v(" "),s("strong",[t._v("使用 HTTPing")])]),t._v(" "),s("p",[s("strong",[t._v("HTTPing")]),t._v(" 是一个专门用于测试 HTTP 层延迟的工具。")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("安装（Windows 下可使用 WSL 安装）")]),t._v("："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" httping\n")])])])]),t._v(" "),s("li",[s("strong",[t._v("测试延迟")]),t._v("："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("httping "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" http://example.com\n")])])]),s("ul",[s("li",[s("code",[t._v("-c 5")]),t._v("：发送 5 次请求。")]),t._v(" "),s("li",[s("code",[t._v("-g")]),t._v("：指定目标 URL。")])])]),t._v(" "),s("li",[s("strong",[t._v("输出示例")]),t._v("："),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("PING http://example.com:80 (93.184.216.34):\nconnected to 93.184.216.34:80, seq=0 time=78.11 ms\nconnected to 93.184.216.34:80, seq=1 time=75.32 ms\n...\n")])])])])]),t._v(" "),s("h4",{attrs:{id:"使用-http-traceroute"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-http-traceroute"}},[t._v("#")]),t._v(" "),s("strong",[t._v("使用 HTTP Traceroute")])]),t._v(" "),s("p",[t._v("使用工具如 "),s("strong",[t._v("mtr")]),t._v(" 或 "),s("strong",[t._v("httping")]),t._v(" 提供 HTTP 路由跟踪，结合延迟和路径信息。")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_4-使用浏览器开发者工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用浏览器开发者工具"}},[t._v("#")]),t._v(" "),s("strong",[t._v("4. 使用浏览器开发者工具")])]),t._v(" "),s("p",[t._v("现代浏览器的开发者工具提供了详细的 HTTP 请求时间信息。")]),t._v(" "),s("h4",{attrs:{id:"操作步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" "),s("strong",[t._v("操作步骤")])]),t._v(" "),s("ol",[s("li",[t._v("打开目标网站。")]),t._v(" "),s("li",[t._v("按 "),s("strong",[t._v("F12")]),t._v(" 打开开发者工具。")]),t._v(" "),s("li",[t._v("切换到 "),s("strong",[t._v("Network（网络）")]),t._v(" 标签。")]),t._v(" "),s("li",[t._v("访问目标页面，选择一个 HTTP 请求。")]),t._v(" "),s("li",[t._v("查看 "),s("strong",[t._v("Timing（时间）")]),t._v(" 信息，包括：\n"),s("ul",[s("li",[s("strong",[t._v("DNS Lookup")]),t._v("：域名解析时间。")]),t._v(" "),s("li",[s("strong",[t._v("TCP Connect")]),t._v("：连接时间。")]),t._v(" "),s("li",[s("strong",[t._v("SSL/TLS")]),t._v("（HTTPS 时）：握手时间。")]),t._v(" "),s("li",[s("strong",[t._v("Request Sent")]),t._v("：请求发送时间。")]),t._v(" "),s("li",[s("strong",[t._v("Waiting")]),t._v("：等待服务器响应时间。")]),t._v(" "),s("li",[s("strong",[t._v("Content Download")]),t._v("：下载内容时间。")])])])]),t._v(" "),s("h4",{attrs:{id:"适用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#适用场景"}},[t._v("#")]),t._v(" "),s("strong",[t._v("适用场景")])]),t._v(" "),s("ul",[s("li",[t._v("可视化分析 HTTP 延迟来源。")]),t._v(" "),s("li",[t._v("对比多个域名或请求类型的延迟差异。")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_5-使用-postman-或-api-测试工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-使用-postman-或-api-测试工具"}},[t._v("#")]),t._v(" "),s("strong",[t._v("5. 使用 Postman 或 API 测试工具")])]),t._v(" "),s("h4",{attrs:{id:"postman"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#postman"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Postman")])]),t._v(" "),s("ol",[s("li",[t._v("打开 Postman，创建一个 "),s("strong",[t._v("GET")]),t._v(" 请求。")]),t._v(" "),s("li",[t._v("输入目标 URL（如 "),s("code",[t._v("http://example.com")]),t._v("）。")]),t._v(" "),s("li",[t._v("点击 "),s("strong",[t._v("Send")]),t._v("，查看请求详情。")]),t._v(" "),s("li",[t._v("响应部分会显示 "),s("strong",[t._v("Time Taken")]),t._v("（耗时）。")])]),t._v(" "),s("h4",{attrs:{id:"api-speed-testing-工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-speed-testing-工具"}},[t._v("#")]),t._v(" "),s("strong",[t._v("API Speed Testing 工具")])]),t._v(" "),s("ul",[s("li",[t._v("如 "),s("strong",[t._v("Postman Monitors")]),t._v("，支持自动化 HTTP 性能测试。")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_6-使用-python-脚本自动化测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-使用-python-脚本自动化测试"}},[t._v("#")]),t._v(" "),s("strong",[t._v("6. 使用 Python 脚本自动化测试")])]),t._v(" "),s("h4",{attrs:{id:"示例代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例代码"}},[t._v("#")]),t._v(" "),s("strong",[t._v("示例代码")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" requests\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" time\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test_http_latency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    start "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" requests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    end "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    latency "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" end "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"URL: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Status Code: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status_code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Total Latency: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("latency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token format-spec"}},[t._v(".3f")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(' seconds"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 示例")]),t._v("\ntest_http_latency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://example.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"输出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出"}},[t._v("#")]),t._v(" "),s("strong",[t._v("输出")])]),t._v(" "),s("ul",[s("li",[t._v("显示请求 URL 的状态码和总延迟时间。")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"_7-使用专业工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-使用专业工具"}},[t._v("#")]),t._v(" "),s("strong",[t._v("7. 使用专业工具")])]),t._v(" "),s("h4",{attrs:{id:"pingdom-或-gtmetrix"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pingdom-或-gtmetrix"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Pingdom 或 GTmetrix")])]),t._v(" "),s("ul",[s("li",[t._v("提供网站的详细性能报告，包括 HTTP 请求的时间分析。")]),t._v(" "),s("li",[t._v("支持全球多个区域的测试，便于了解不同地域的延迟差异。")])]),t._v(" "),s("h4",{attrs:{id:"wireshark"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wireshark"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Wireshark")])]),t._v(" "),s("ul",[s("li",[t._v("深入分析 HTTP 请求的数据包，精确测量延迟来源。")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"总结方法与适用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结方法与适用场景"}},[t._v("#")]),t._v(" "),s("strong",[t._v("总结方法与适用场景")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("工具/方法")])]),t._v(" "),s("th",[s("strong",[t._v("优点")])]),t._v(" "),s("th",[s("strong",[t._v("适用场景")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("curl")])]),t._v(" "),s("td",[t._v("快速、简单，提供详细时间细节")]),t._v(" "),s("td",[t._v("单次 HTTP/HTTPS 延迟测试")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("wget")])]),t._v(" "),s("td",[t._v("显示 HTTP 请求详细过程")]),t._v(" "),s("td",[t._v("验证服务器响应时间和行为")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("httping")])]),t._v(" "),s("td",[t._v("专业化 HTTP 延迟测试工具")]),t._v(" "),s("td",[t._v("高频 HTTP 延迟测量")])]),t._v(" "),s("tr",[s("td",[t._v("浏览器开发者工具")]),t._v(" "),s("td",[t._v("可视化延迟，细分不同阶段")]),t._v(" "),s("td",[t._v("页面调试和 HTTP 请求性能分析")])]),t._v(" "),s("tr",[s("td",[t._v("Python 脚本")]),t._v(" "),s("td",[t._v("可编程，灵活自动化测试")]),t._v(" "),s("td",[t._v("定制化批量测试")])]),t._v(" "),s("tr",[s("td",[t._v("Pingdom/GTmetrix")]),t._v(" "),s("td",[t._v("提供全球网络延迟和性能分析")]),t._v(" "),s("td",[t._v("综合性能报告")])])])]),t._v(" "),s("p",[t._v("根据你的需求，可以选择适合的工具。如果需要进一步分析 HTTP 请求的延迟来源，可以使用组合工具深入排查。")])])}),[],!1,null,null,null);s.default=e.exports}}]);