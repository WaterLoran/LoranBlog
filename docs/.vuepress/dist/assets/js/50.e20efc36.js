(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{482:function(t,a,s){"use strict";s.r(a);var r=s(2),e=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"litemall性能测试实战-02需求分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#litemall性能测试实战-02需求分析"}},[t._v("#")]),t._v(" Litemall性能测试实战_02需求分析")]),t._v(" "),a("p",[t._v("说在前面: 初次系统的学习全流程性能测试,所以先通过摘抄书籍重点内容以加强自身记忆,后续再根据实际项目做思考和修改")]),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("h3",{attrs:{id:"所要完成的两项工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#所要完成的两项工作"}},[t._v("#")]),t._v(" 所要完成的两项工作")]),t._v(" "),a("ol",[a("li",[t._v("采集性能测试需求\n采集对象包括\n业务交易,业务量,业务指标,业务量趋势,\n用户信息,\n系统架构,系统硬件指标等")]),t._v(" "),a("li",[t._v("分析性能测试需求\n确定性能测试范围,分析出那些业务纳入性能测试范围及性能指标是什么\n另外要分析用户使用行为,业务分布,分析业务量\n估算出TPS与并发用户数等性能测试执行依据")])]),t._v(" "),a("h3",{attrs:{id:"性能测试指标分为两类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能测试指标分为两类"}},[t._v("#")]),t._v(" 性能测试指标分为两类")]),t._v(" "),a("ol",[a("li",[t._v("业务指标\nTPS, RT(ART), 事务成功率")]),t._v(" "),a("li",[t._v("硬件性能指标\nCPU使用率,内存使用率,磁盘繁忙率等,(具体可参考开源中prometheus+grafana对指标数据的采集)")])]),t._v(" "),a("h3",{attrs:{id:"测试需求从何处获取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试需求从何处获取"}},[t._v("#")]),t._v(" 测试需求从何处获取")]),t._v(" "),a("ol",[a("li",[t._v("系统架构\n物理结构与逻辑架构,包括中间件产品与配置,数据库配置,在测试环境建立时,我们要参考")]),t._v(" "),a("li",[t._v("采集业务并量化业务\n我们指计算TPS数的时候会计算到")]),t._v(" "),a("li",[t._v("了解业务扩展趋势\n比如业务年增长率是多少? 未来业务量是多少,比如系统的需求中说道要满足未来三年的业务增长需求")]),t._v(" "),a("li",[t._v("了解系统是否有归档机制\n大家知道数据库中数据量大时候对性能是由影响的,如果有归档价值,可以把一些无用或者过时的信息移到归档库,这样就减少了当前库中的数据,有利于提高系统性能")]),t._v(" "),a("li",[t._v("采集业务发生时段\n比如一天产生20000订单,而高峰期1小时就能完成10000单,而不是平均到每小时,主要再估算TPS与并发用户数时用到")]),t._v(" "),a("li",[t._v("采集在线用户数\n活动用户数,业务分布,有些系统用户量特别大,会对系统造成性能瓶颈,可以通过分析活动用户数和业务分布来分析负载情况")]),t._v(" "),a("li",[t._v("系统是否与第三方系统由关联关系\n这决定我们是否要做系统单板,即用程序来代替第三方系统")]),t._v(" "),a("li",[t._v("采集业务性能指标\n比如响应时间,吞吐量,等")]),t._v(" "),a("li",[t._v("采集系统硬件指标\nCPU利用率,内存利用率,可用内存")])]),t._v(" "),a("h3",{attrs:{id:"被测系统分为3类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#被测系统分为3类"}},[t._v("#")]),t._v(" 被测系统分为3类")]),t._v(" "),a("ol",[a("li",[t._v("新应用类\nNP全新立项系统,没有原型系统")]),t._v(" "),a("li",[t._v("升级改造类\nCIP, 旧系统重构")]),t._v(" "),a("li",[t._v("需求变动类\n基于享有业务系统功能需求变更\n基于RFC有可能存在于新应用中,也有可能存在于CIP中,所以实际上我们只讨论新应用类与CIP类,不同类别的系统我们的分析方法会有不同,\n对于新业务系统我们从需求文档中采集性能需求,对于不完善的内容进行补充,\n对于升级类我们分析原型系统业务数据就即可,最直接的办法就是分析原型系统的数据,统计业务量,业务分布等信息")])]),t._v(" "),a("h2",{attrs:{id:"需求采集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求采集"}},[t._v("#")]),t._v(" 需求采集")]),t._v(" "),a("h3",{attrs:{id:"系统架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统架构"}},[t._v("#")]),t._v(" 系统架构")]),t._v(" "),a("p",[t._v("本次系统将被测对象定位litemall,是一个开源项目,具体地址为https://github.com/linlinjava/litemall")]),t._v(" "),a("ol",[a("li",[t._v("绘制出环境物理架构\nLinux下部署Mysql,Java,npm,nodejs,并使用同一台虚拟机拉起前端服务\n该虚拟机的规格为2U4G")]),t._v(" "),a("li",[t._v("逻辑架构\n逻辑架构展现的是软件系统中元件之间的关系,比如用户界面,数据库,外部系统接口等等")])]),t._v(" "),a("p",[t._v("业务逻辑架构如下")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-mermaid"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("flowchart")]),t._v(" LR\n    消费者 "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),a("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|手机微信|")]),t._v(" wx_front\n    消费者 "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),a("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|手机浏览器|")]),t._v(" litemall_front\n    商家管理员 "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|手机浏览器|")]),t._v(" admin"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[管理后台VUE前端]")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" 用户\n    消费者\n    商家管理员\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" Litemall被测系统\n\twx_front"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[小商场微信小程序前端litemall-wx]")]),t._v("\n\tlitemall_front"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[轻商场VUE前端litemall-vue]")]),t._v("\n    litemall-db"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[litemall-db]")]),t._v("\n    admin-api"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[管理后台Spring_boot后端]")]),t._v("\n    litemall-core"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[litemall-core]")]),t._v("\n    litemall-w"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("x-")]),t._v("api[小商城SpringBoot后端litemall-w"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("x-")]),t._v("api]\n    \n\tadmin "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("<--\x3e")]),t._v(" admin-api\n\tadmin-api "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("<--\x3e")]),t._v(" litemall-core\n\tadmin-api "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("<--\x3e")]),t._v(" litemall-db\n\tlitemall-w"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("x-")]),t._v("api "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("<--\x3e")]),t._v(" litemall-core\n\tlitemall-w"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("x-")]),t._v("api "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("<--\x3e")]),t._v(" litemall-db\n\t\n\twx_front "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("<--\x3e")]),t._v(" litemall-w"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("x-")]),t._v("api\n\tlitemall_front "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("<--\x3e")]),t._v(" litemall-w"),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("x-")]),t._v("api\n    \n    litemall-db "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("<--\x3e")]),t._v(" MYSQL    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),a("h3",{attrs:{id:"业务流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#业务流程"}},[t._v("#")]),t._v(" 业务流程")]),t._v(" "),a("p",[t._v("游客如下")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-mermaid"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Enter"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[进入litemall]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" browse"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[浏览商品]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Enter "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[退出litemall]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    browse "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" buy"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[购买商品]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    browse "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    buy "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[退出litemall]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    buy "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" register"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[注册]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    register "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" buy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    register "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("注册用户")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-mermaid"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Enter"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[进入litemall]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" browse"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[浏览商品]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Enter"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[进入litemall]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" login1"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[登录]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    login1 "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" browse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Enter"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[进入litemall]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[退出litemall]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    browse "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" buy"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[购买商品]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    buy "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|login|")]),t._v(" buy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    buy "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|nologin|")]),t._v(" login"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("{{登录}}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    login "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" buy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    browse "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    login "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    buy "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    \n")])])]),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-mermaid"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    Enter"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[进入litemall]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" login"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[登录]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    login "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" fabu"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[发布商品]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    login "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" xiajia"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[下架商品]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    login "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" xiugai"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[修改商品]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    xiugai "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    fabu "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    xiajia "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" quit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n")])])]),a("p",[t._v("说明:")]),t._v(" "),a("p",[a("strong",[t._v("游客")])]),t._v(" "),a("ol",[a("li",[t._v("被引流过来之后发现平台风格不好看,不喜欢,以及发现被忽悠过来的,就直接退出了litemall")]),t._v(" "),a("li",[t._v("初步浏览商品后,发现商品不感兴趣,直接退出")]),t._v(" "),a("li",[t._v("发现商品还挺优惠的,有想买的冲动")]),t._v(" "),a("li",[t._v("于是去注册,注册完之后继续购买,最后退出")])]),t._v(" "),a("p",[a("strong",[t._v("注册用户")])]),t._v(" "),a("ol",[a("li",[t._v("相比较于游客,多了一个登录的过程")])]),t._v(" "),a("p",[a("strong",[t._v("商家")])]),t._v(" "),a("ol",[a("li",[t._v("商家主要做的是上下架商品,以为修改商品的信息")])]),t._v(" "),a("h3",{attrs:{id:"业务相关性能需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#业务相关性能需求"}},[t._v("#")]),t._v(" 业务相关性能需求")]),t._v(" "),a("p",[t._v("系统初次上线,或者初步初次做测试,初次规划容量,暂定为注册用户规模为10万,每天活跃用户数量为5%,即5K,这个数据参考书本中的比例,实际数据需要参考其他友商的数据")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("根据初次性能测试说做规划,暂定注册用户规模为10万,即下次规划大规模改善系统性能或重构前的注册用户规模,每天活跃用户数量为5%")])]),t._v(" "),a("li",[a("p",[t._v("用户在商城中以浏览商品,购买商品,登录注册为主.(实际业务情况根据实际分析,或者根据运营人员的数据去规划),日PV预计为2万PV(pageView), 其中浏览,购买登录注册比例约为8:1:1, 即浏览的为1.6万PV, 购买商品为0.2万PV, 登录注册为0.2万PV\n具体业务情况,可使用测试右移技术,对nginx进行监控,以及对其他关键节点打点记录数据")])]),t._v(" "),a("li",[a("p",[t._v("系统业务增长率为30%, 系统在3年内部打算进行分库分表处理,需要系统在性能上能够撑住,也就是隐形要求在3年内不进行数据归档,在测试时候需要3年的存量数据")])]),t._v(" "),a("li",[a("p",[t._v("要求系统能够提供良好的体验,比如各项业务的响应控制在3秒之内")])]),t._v(" "),a("li",[a("p",[t._v("为了系统稳定,要求在日常运营时CPU使用率<70%. 磁盘Disk ime < 70%且无网络瓶颈")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("指标名称")]),t._v(" "),a("th",[t._v("业务量")]),t._v(" "),a("th",[t._v("业务增长率")]),t._v(" "),a("th",[t._v("响应时间")]),t._v(" "),a("th",[t._v("事务成功率")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("登录")]),t._v(" "),a("td",[t._v("0.1万 PV/天")]),t._v(" "),a("td",[t._v("大约30%")]),t._v(" "),a("td",[t._v("小于3秒")]),t._v(" "),a("td",[t._v("99%")])]),t._v(" "),a("tr",[a("td",[t._v("注册")]),t._v(" "),a("td",[t._v("0.1万 PV/天")]),t._v(" "),a("td",[t._v("大约30%")]),t._v(" "),a("td",[t._v("小于3秒")]),t._v(" "),a("td",[t._v("99%")])]),t._v(" "),a("tr",[a("td",[t._v("浏览商品")]),t._v(" "),a("td",[t._v("1.6万 PV/天")]),t._v(" "),a("td",[t._v("大约30%")]),t._v(" "),a("td",[t._v("小于3秒")]),t._v(" "),a("td",[t._v("99%")])]),t._v(" "),a("tr",[a("td",[t._v("购买商品")]),t._v(" "),a("td",[t._v("0.2万 PV/天")]),t._v(" "),a("td",[t._v("大约30%")]),t._v(" "),a("td",[t._v("小于3秒")]),t._v(" "),a("td",[t._v("99%")])])])])])]),t._v(" "),a("h3",{attrs:{id:"系统硬件指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统硬件指标"}},[t._v("#")]),t._v(" 系统硬件指标")]),t._v(" "),a("p",[t._v("系统硬件指标对象时硬件资源,比如CPU,内存,磁盘,网络,网络带宽等等\n相关阈值")]),t._v(" "),a("p",[t._v("30% ==> 运行稳定正常")]),t._v(" "),a("p",[t._v("50% ==> 需要开始着重关注")]),t._v(" "),a("p",[t._v("70% ==> 即将要发生故障,或者业务中断")]),t._v(" "),a("p",[t._v("90% ==> 故障已经在发生,用户体验极差")]),t._v(" "),a("h2",{attrs:{id:"需求分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求分析"}},[t._v("#")]),t._v(" 需求分析")]),t._v(" "),a("h3",{attrs:{id:"圈定测试范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#圈定测试范围"}},[t._v("#")]),t._v(" 圈定测试范围")]),t._v(" "),a("ol",[a("li",[t._v("确定高频次的业务")]),t._v(" "),a("li",[t._v("确定性能影响大的业务")]),t._v(" "),a("li",[t._v("确定此功能的可验证性\n如果涉及第三方软件,那么就有可能设置单板程序,即编写软件来模拟第三方服务")])]),t._v(" "),a("h3",{attrs:{id:"明确性能指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#明确性能指标"}},[t._v("#")]),t._v(" 明确性能指标")]),t._v(" "),a("ol",[a("li",[t._v("吞吐量\n日PV是2万, 3年30%增长, 日PV=2 * (1+30%) ^2 约等于3.8万")]),t._v(" "),a("li",[t._v("响应时间\n要求3秒以内")]),t._v(" "),a("li",[t._v("成功率\n要求99%以上")]),t._v(" "),a("li",[t._v("稳定的波动正常范围\n基础设施行业,对于指标的波动,容忍度为5%")]),t._v(" "),a("li",[t._v("其他各项硬件等性能指标")])]),t._v(" "),a("h3",{attrs:{id:"分析业务量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析业务量"}},[t._v("#")]),t._v(" 分析业务量")]),t._v(" "),a("p",[t._v("我们除了要做足一定数量的历史数据,还得关注业务量的增长")]),t._v(" "),a("h3",{attrs:{id:"计算tps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#计算tps"}},[t._v("#")]),t._v(" 计算TPS")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("TPS我们一般取系统业务最高峰期的值\n然后这里需要绘制出各个时间时间段的业务量,即多个业务量的折线图")])]),t._v(" "),a("li",[a("p",[t._v("根据28定律,即在20%的时间,完成80%的事情")]),t._v(" "),a("p",[t._v("假设最高峰期设计5208 PV, (根据友商数据,或者评估,或者初步上线后的数据评估)\n即TPS = 5208 * 80% / (3600 * 20%) 约等于 5.8 , 即每秒5.8次\n所以根据数据我们估算出TPS")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("功能")]),t._v(" "),a("th",[t._v("高峰期")]),t._v(" "),a("th",[t._v("TPS")]),t._v(" "),a("th",[t._v("响应时间")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("登录")]),t._v(" "),a("td",[t._v("260")]),t._v(" "),a("td",[t._v("0.39")]),t._v(" "),a("td",[t._v("小于3秒")])]),t._v(" "),a("tr",[a("td",[t._v("注册")]),t._v(" "),a("td",[t._v("260")]),t._v(" "),a("td",[t._v("0.39")]),t._v(" "),a("td",[t._v("小于3秒")])]),t._v(" "),a("tr",[a("td",[t._v("浏览商品")]),t._v(" "),a("td",[t._v("4166")]),t._v(" "),a("td",[t._v("4.64")]),t._v(" "),a("td",[t._v("小于3秒")])]),t._v(" "),a("tr",[a("td",[t._v("购买商品")]),t._v(" "),a("td",[t._v("520")]),t._v(" "),a("td",[t._v("0.78")]),t._v(" "),a("td",[t._v("小于3秒")])])])])])]),t._v(" "),a("h3",{attrs:{id:"分析系统协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析系统协议"}},[t._v("#")]),t._v(" 分析系统协议")]),t._v(" "),a("ol",[a("li",[t._v("我们可以像开发团队咨询,了解程序的架构与协议")]),t._v(" "),a("li",[t._v("我们可以抓包分析")])]),t._v(" "),a("h2",{attrs:{id:"并发数计算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#并发数计算"}},[t._v("#")]),t._v(" 并发数计算")]),t._v(" "),a("p",[t._v("通常在互联网产品领域,这个概念会用的比较多,即并发的用户数,而在基础设施行业,比如交换机,核心网网元,就不会有这个概念,因为他们的核心指标是,每秒处理多少的请求,或者业务流")]),t._v(" "),a("p",[a("strong",[t._v("业内常用的并发数计算方法")])]),t._v(" "),a("ol",[a("li",[t._v("由TPS来估算并发数")]),t._v(" "),a("li",[t._v("有在线活动用户数来估算并发数")]),t._v(" "),a("li",[t._v("根据经验来估算并发数")])]),t._v(" "),a("p",[t._v("TPS反映了系统在每秒内可以执行成功的事务数,是由事务数出时间得来,事务由用户完成")]),t._v(" "),a("p",[a("strong",[t._v("总结为")])]),t._v(" "),a("p",[t._v("Vu(业务名称) = TPS(业务名称) * (RunTime+ThinkTime)")]),t._v(" "),a("p",[t._v("Thinktime行业内一般为3秒,\n每一个提交或者点击,按照0.2秒计算\nRuntime 是测试程序/脚本运行(迭代或响应)一次说消耗的时间,包括事务时间+非事务时间")]),t._v(" "),a("p",[t._v("注: Vu(业务名称)表示此业务的虚拟用户数")]),t._v(" "),a("p",[a("strong",[t._v("计算VU")])]),t._v(" "),a("ol",[a("li",[t._v("不包括非事务时间计算VU\nVu=TPS*2 = 12"),a("br"),t._v("\n2为处理事务所需要的时间\n即如果按照这个来计算的话,name将要测试并发用户数,以验证系统能够同时承载这么多用户")]),t._v(" "),a("li",[t._v("包括非事务时间计算VU\nVu=Tps * (2+3) = 29\n3 为Thinktime\n即如果按照这个来计算的话,name将要测试并发用户数,以验证系统能够同时承载这么多用户")])]),t._v(" "),a("p",[t._v("通常按照包括非事务时间来计算Vu")]),t._v(" "),a("p",[t._v("参考书籍: <全栈性能测试修炼宝典>\n致谢: 这是一本极好的书,给了我极大的帮助")])])}),[],!1,null,null,null);a.default=e.exports}}]);