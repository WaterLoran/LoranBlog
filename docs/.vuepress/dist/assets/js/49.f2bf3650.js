(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{481:function(a,l,e){"use strict";e.r(l);var t=e(2),s=Object(t.a)({},(function(){var a=this,l=a._self._c;return l("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[l("h1",{attrs:{id:"litemall性能测试实战-01搭建环境"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#litemall性能测试实战-01搭建环境"}},[a._v("#")]),a._v(" Litemall性能测试实战_01搭建环境")]),a._v(" "),l("h2",{attrs:{id:"为什么是litemall"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#为什么是litemall"}},[a._v("#")]),a._v(" 为什么是Litemall")]),a._v(" "),l("ol",[l("li",[a._v("开源免费,容易获取,容易分享")]),a._v(" "),l("li",[a._v("架构不复杂,仅仅是部署在单机上,并未上微服务架构,部署简单,对资源的诉求简单")]),a._v(" "),l("li",[a._v("有沟通群体,该开源项目有创建项目的交流群,以及最近自学的时候也解决该项目实例,对于解决问题上 很大信息和资源")])]),a._v(" "),l("h3",{attrs:{id:"源代码地址"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#源代码地址"}},[a._v("#")]),a._v(" 源代码地址")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("https://github.com/linlinjava/litemall\n")])])]),l("h2",{attrs:{id:"快速启动"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#快速启动"}},[a._v("#")]),a._v(" 快速启动")]),a._v(" "),l("h2",{attrs:{id:"git-clone-代码"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#git-clone-代码"}},[a._v("#")]),a._v(" Git clone 代码")]),a._v(" "),l("ol",[l("li",[l("p",[a._v("前置条件\n在使用yum安装Git\n在Linux上生成公钥和私钥,并上传到自己的GIthub账号上\nsh-keygen -t rsa -C XXXXXXXX@qq.com -b 4096")])]),a._v(" "),l("li",[l("p",[a._v("Clone之前先将代码fork到自己的仓库")])]),a._v(" "),l("li",[l("p",[a._v("执行命令clone代码")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("yum install git\ngit clone git@github.com:WaterLoran/litemall.git\n")])])])])]),a._v(" "),l("h3",{attrs:{id:"配置最小开发环境"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#配置最小开发环境"}},[a._v("#")]),a._v(" 配置最小开发环境")]),a._v(" "),l("ol",[l("li",[l("p",[a._v("Mysql\n相关命令\n配置Mysql 8.0安装源")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("sudo rpm -Uvh https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm\n")])])]),l("p",[a._v("安装Mysql 8.0")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022\nsudo yum --enablerepo=mysql80-community install mysql-community-server\n")])])]),l("p",[a._v("启动Mysql服务")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("sudo service mysqld start\n")])])]),l("p",[a._v("查看Mysql服务状态")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("service mysqld status\n")])])]),l("p",[a._v("查看临时密码")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v('grep "A temporary password" /var/log/mysqld.log\n')])])]),l("p",[a._v("查到密码为   3%:(VcqMVB=-")]),a._v(" "),l("p",[a._v("更改密码")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("ALTER USER 'root'@'localhost' IDENTIFIED BY 'Litemall@123';\n")])])]),l("p",[a._v("即密码修改为  Litemall@123\n参考博客:\nhttps://zhuanlan.zhihu.com/p/372582996\nhttps://blog.csdn.net/CAG55688/article/details/123480634")]),a._v(" "),l("p",[a._v("如果需要远程登录")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("执行   use mysql;\n执行   update user set host = '%' where user = 'root';\n执行   FLUSH PRIVILEGES;\n")])])])]),a._v(" "),l("li",[l("p",[a._v("JDK1.8或以上")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("yum list java*\nyum install java-1.8.0*\n")])])])]),a._v(" "),l("li",[l("p",[a._v("Maven\n下载安装包3.6.3版本")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("wget https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz\n")])])]),l("p",[a._v("创建/usr/local/maven目录")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("mkdir -p  /usr/local/maven\n")])])]),l("p",[a._v("将maven包解压到/usr/local/maven目录")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("tar -xzvf apache-maven-3.6.3-bin.tar.gz -C /usr/local/maven\n")])])]),l("p",[a._v("配置环境变量")]),a._v(" "),l("p",[a._v("vim /etc/profile\n并在最后加上\nMAVEN_HOME=/usr/local/maven/apache-maven-3.6.3\nexport MAVEN_HOME\nexport PATH=${PATH}😒{MAVEN_HOME}/bin")]),a._v(" "),l("p",[a._v("然后 :wq 保存退出\n注意: MAVEN_HOME的路径需要根据真是的路径而设置, 可以通过 cd /usr/local/maven 然后ls 查看,再对应修改")]),a._v(" "),l("p",[a._v("使环境变量重新生效")]),a._v(" "),l("p",[a._v("source /etc/profile")])]),a._v(" "),l("li",[l("p",[a._v("Nodejs\n使用yum安装")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("# yum安装设置Node.js v16版本\ncurl --silent --location https://rpm.nodesource.com/setup_16.x | sudo bash\n(setup_16里16是版本号，可根据自己需要修改)\n# yum方式安装\nsudo yum -y install nodejs\n# 其它参考：以上命令安装不成功可执行：\nsudo yum clean all\n# 若本地存在多个nodesoucre，可以执行以下命令，在重新yum安装命令\nsudo rm -fv /etc/yum.repos.d/nodesource*\n\n链接：https://www.jianshu.com/p/959ca0e5495a\n")])])]),l("p",[a._v("直接二进制安装(实际使用)")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("wget https://nodejs.org/dist/v16.17.0/node-v16.17.0-linux-x64.tar.xz\nxz -d node-v16.17.0-linux-x64.tar.xz\nmkdir -p /usr/local/nodejs\ntar xvf node-v16.17.0-linux-x64.tar -C /usr/local/nodejs\nln -s /usr/local/nodejs/node-v16.17.0-linux-x64/bin/node /usr/bin/node\nln -s /usr/local/nodejs/node-v16.17.0-linux-x64/bin/npm /usr/bin/npm\n")])])])]),a._v(" "),l("li",[l("p",[a._v("微信开发者工具\n此处并未规划测试微信端小程序,所以暂不部署微信开发者相关工具")])])]),a._v(" "),l("h3",{attrs:{id:"数据库依次导入litemall-db-sql的数据库文件"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#数据库依次导入litemall-db-sql的数据库文件"}},[a._v("#")]),a._v(" 数据库依次导入litemall-db/sql的数据库文件")]),a._v(" "),l("p",[a._v("问题解决参考地址 https://www.jianshu.com/p/b437566ccf98")]),a._v(" "),l("p",[a._v("登录mysql,执行一下命令")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("set global validate_password.policy=0;\nset global validate_password.length=4;\n退出后执行 mysql_secure_installation\n")])])]),l("p",[a._v("执行一下命令并输入密码Litemall@123,将数据导入数据库, < 符号前的litemall应该数数据库名称")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("mysql -u root -p < /usr/local/litemall/litemall-db/sql/litemall_schema.sql\nmysql -u root -p litemall < /usr/local/litemall/litemall-db/sql/litemall_table.sql\nmysql -u root -p litemall < /usr/local/litemall/litemall-db/sql/litemall_data.sql\n")])])]),l("p",[a._v("无报错即导入成功")]),a._v(" "),l("h3",{attrs:{id:"启动小商场和管理后台的后端服务"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#启动小商场和管理后台的后端服务"}},[a._v("#")]),a._v(" 启动小商场和管理后台的后端服务")]),a._v(" "),l("p",[a._v("这里还要一个重要的问题,就是需要 JDBC相关文件进行修改,文件路径为/usr/local/litemall/litemall-db/src/main/resources/application-db.yml\n具体的修改内容需要根据实际环境来修改,需要修改的有username和password")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("      url:  jdbc:mysql://localhost:3306/litemall?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&verifyServerCertificate=false&useSSL=false\n      driver-class-name:  com.mysql.cj.jdbc.Driver\n      username:  root\n      password:  Litemall@123\n")])])]),l("p",[a._v("实际部署命令")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("cd /usr/local/litemall\nmvn install\nmvn clean package\ncd /usr/local/litemall\nnohup java -Dfile.encoding=UTF-8 -jar litemall-all/target/litemall-all-0.1.0-exec.jar &\n备注: \n需要编译出jar文件\nmvn install\nmvn clean package\n")])])]),l("p",[a._v("如果需要被监控JVM的时候,使用如下的命令")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("nohup java -javaagent:/usr/local/jmx_exporter/jmx_prometheus_javaagent-0.16.1.jar=3010:/usr/local/jmx_exporter/jmx_exporter.yml -Dfile.encoding=UTF-8 -jar  /usr/local/litemall/litemall-all/target/litemall-all-0.1.0-exec.jar &\n")])])]),l("h3",{attrs:{id:"启动管理后台前端"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#启动管理后台前端"}},[a._v("#")]),a._v(" 启动管理后台前端")]),a._v(" "),l("p",[a._v("如果遇到问题,参考的解决方法")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("rm -rf node_modules package-lock.json & npm install & npm run dev\n")])])]),l("p",[a._v("实际部署命令")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("npm install -g cnpm --registry=https://registry.npm.taobao.org\ncd /usr/local/litemall/litemall-admin\nnpm install\nnohup npm run dev &\n")])])]),l("h3",{attrs:{id:"启动小商城前端"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#启动小商城前端"}},[a._v("#")]),a._v(" 启动小商城前端")]),a._v(" "),l("p",[a._v("该前端为微信相关的,此次测试暂不涉及,所以不启动")]),a._v(" "),l("h3",{attrs:{id:"启动轻商城前端"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#启动轻商城前端"}},[a._v("#")]),a._v(" 启动轻商城前端")]),a._v(" "),l("p",[a._v("这里有个问题,用cnpm的时候,有些包会没有办法下载和安装,所以需要使用npm\n如果有问题.考虑的处理方法是")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("rm -rf node_modules package-lock.json & npm install & npm run dev\n")])])]),l("p",[a._v("实际执行的命令是")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("npm install -g cnpm --registry=https://registry.npm.taobao.org\ncd /usr/local/litemall/litemall-vue\nnpm install\nnohup npm run dev &\n")])])]),l("h3",{attrs:{id:"开启重新拉起所有服务"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#开启重新拉起所有服务"}},[a._v("#")]),a._v(" 开启重新拉起所有服务")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("cd /usr/local/litemall\nnohup java -Dfile.encoding=UTF-8 -jar litemall-all/target/litemall-all-0.1.0-exec.jar &\ncd /usr/local/litemall/litemall-admin\nnohup npm run dev &\ncd /usr/local/litemall/litemall-vue\nnohup npm run dev &\nexit\n")])])]),l("p",[a._v("如果需要被监控JVM的时候,使用如下的命令")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("cd /usr/local/litemall\nnohup java -javaagent:/usr/local/jmx_exporter/jmx_prometheus_javaagent-0.16.1.jar=3010:/usr/local/jmx_exporter/jmx_exporter.yml -Dfile.encoding=UTF-8 -jar  /usr/local/litemall/litemall-all/target/litemall-all-0.1.0-exec.jar &\ncd /usr/local/litemall/litemall-admin\nnohup npm run dev &\ncd /usr/local/litemall/litemall-vue\nnohup npm run dev &\nexit\n")])])]),l("p",[a._v("如果启动后台服务jar包,并且被skywalking监控的话,对应使用一下的命令")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("nohup java -javaagent:/usr/local/apache-skywalking-apm-bin/agent/skywalking-agent.jar -Dskywalking.agent.service_name=litemall -Dskywalking.collector.backend_service=192.168.0.107:11800 -javaagent:/usr/local/jmx_exporter/jmx_prometheus_javaagent-0.16.1.jar=3010:/usr/local/jmx_exporter/jmx_exporter.yml -Dfile.encoding=UTF-8 -jar  /usr/local/litemall/litemall-all/target/litemall-all-0.1.0-exec.jar &\n")])])]),l("p",[a._v("使用skywalking891的agent启动")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",{pre:!0,attrs:{class:"language-text"}},[l("code",[a._v("nohup java -javaagent:/usr/local/apache-skywalking-java-agent-8.9.0/skywalking-agent/skywalking-agent.jar -Dskywalking.agent.service_name=litemall -Dskywalking.collector.backend_service=192.168.0.105:11800 -javaagent:/usr/local/jmx_exporter/jmx_prometheus_javaagent-0.16.1.jar=3010:/usr/local/jmx_exporter/jmx_exporter.yml -Dfile.encoding=UTF-8 -jar  /usr/local/litemall/litemall-all/target/litemall-all-0.1.0-exec.jar &\n")])])])])}),[],!1,null,null,null);l.default=s.exports}}]);