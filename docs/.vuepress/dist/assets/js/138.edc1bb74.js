(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{568:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"第一个使用openai的api的demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一个使用openai的api的demo"}},[t._v("#")]),t._v(" 第一个使用openai的api的demo")]),t._v(" "),s("p",[t._v("具体的代码")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" openai "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" OpenAI\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置 API key 和 API base URL")]),t._v("\napi_key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"api_key"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbase_url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"base_url"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\nclient "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" OpenAI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    api_key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("api_key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    base_url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("base_url\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nchat_completion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("completions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    messages"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"如何学习使用openai来做chatbot"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt-4o-mini"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chat_completion"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("choices"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("p",[t._v("说明: base_url 为一个使用openai的接口,默认则使用官方的, 有时候是代理的接口")]),t._v(" "),s("h3",{attrs:{id:"在pycharm中设置环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在pycharm中设置环境变量"}},[t._v("#")]),t._v(" 在pycharm中设置环境变量")]),t._v(" "),s("h4",{attrs:{id:"步骤-1-在代码中直接读取环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤-1-在代码中直接读取环境变量"}},[t._v("#")]),t._v(" 步骤 1：在代码中直接读取环境变量")]),t._v(" "),s("p",[t._v("Python 提供了 "),s("code",[t._v("os")]),t._v(" 模块来读取环境变量。可以使用 "),s("code",[t._v("os.getenv()")]),t._v(" 或 "),s("code",[t._v("os.environ")]),t._v(" 来获取。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从环境变量中获取 API 密钥")]),t._v("\napi_key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"api_key"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"API Key:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" api_key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"步骤2-在-pycharm-配置环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤2-在-pycharm-配置环境变量"}},[t._v("#")]),t._v(" 步骤2：在 PyCharm 配置环境变量")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("打开运行配置")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("在 PyCharm 中，点击右上角的 “Edit Configurations...” 选项。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("添加环境变量")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("在配置窗口中，找到 “Environment variables” 选项，点击右侧的 “...” 按钮。")]),t._v(" "),s("li",[t._v("添加环境变量，格式为 "),s("code",[t._v("API_KEY=your-api-key")]),t._v("。可以添加多个环境变量，每行一个。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("使用 "),s("code",[t._v("os.getenv")]),t._v(" 访问")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("在代码中使用 "),s("code",[t._v('os.getenv("API_KEY")')]),t._v(" 来读取该环境变量。")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);