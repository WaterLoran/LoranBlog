(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{495:function(t,e,_){"use strict";_.r(e);var v=_(2),r=Object(v.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mysql常用操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql常用操作"}},[t._v("#")]),t._v(" Mysql常用操作")]),t._v(" "),e("h2",{attrs:{id:"_1-接入与权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-接入与权限"}},[t._v("#")]),t._v(" 1.接入与权限")]),t._v(" "),e("h3",{attrs:{id:"_1-1-连接mysql操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-连接mysql操作"}},[t._v("#")]),t._v(" 1.1 连接Mysql操作")]),t._v(" "),e("p",[t._v("mysql -h 主机地址 -u 用户名 －p   然后根据提示输入密码")]),t._v(" "),e("h2",{attrs:{id:"_2-数据库与表的增删查改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-数据库与表的增删查改"}},[t._v("#")]),t._v(" 2.数据库与表的增删查改")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("行为目的")]),t._v(" "),e("th",[t._v("操作方法")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("查询当前各种信息")]),t._v(" "),e("td",[t._v("status")])]),t._v(" "),e("tr",[e("td",[t._v("显示数据库")]),t._v(" "),e("td",[t._v("show databases;")])]),t._v(" "),e("tr",[e("td",[t._v("创建数据库")]),t._v(" "),e("td",[t._v("create database 数据库名称;")])]),t._v(" "),e("tr",[e("td",[t._v("删除数据库")]),t._v(" "),e("td",[t._v("drop databases 数据库名称;")])]),t._v(" "),e("tr",[e("td",[t._v("指定使用数据库")]),t._v(" "),e("td",[t._v("use databases 数据库名称;")])]),t._v(" "),e("tr",[e("td",[t._v("显示数据表")]),t._v(" "),e("td",[t._v("show tables; (需要先使用use 数据库名称来指定数据库)")])]),t._v(" "),e("tr",[e("td",[t._v("显示表结构")]),t._v(" "),e("td",[t._v("describe 表名; 或者disc 表名")])]),t._v(" "),e("tr",[e("td",[t._v("创建数据表")]),t._v(" "),e("td",[t._v("mysql> create table book("),e("br"),t._v("    -> book_id INT NOT NULL AUTO_INCREMENT,"),e("br"),t._v("    -> book_name VARCHAR(100) NOT NULL,"),e("br"),t._v("    -> PRIMARY KEY (book_id)"),e("br"),t._v("    -> )"),e("br"),t._v("    -> ENGINE=InnoDB DEFAULT CHARSET=utf8;"),e("br"),e("br"),t._v("#PRIMARY KEY (book_id)用于指定key,是必须的"),e("br"),t._v("#ENGINE表示所用引擎")])]),t._v(" "),e("tr",[e("td",[t._v("删除数据表")]),t._v(" "),e("td",[t._v("drop table 表名; #直接删除数据表,无法恢复"),e("br"),t._v("truncate table 表名; #删除数据表数据,不删除表结构,不能与where使用"),e("br"),t._v("delete from 表名; #删除指定表名中的所有数据"),e("br"),t._v("delete from 表名 where user_id = 1; #通过与where联用来删除指定行")])])])]),t._v(" "),e("h2",{attrs:{id:"_3-表复制及备份还原"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-表复制及备份还原"}},[t._v("#")]),t._v(" 3.表复制及备份还原")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("行为目的")]),t._v(" "),e("th",[t._v("操作方法")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("复制含有主键等信息的完整表结构")]),t._v(" "),e("td",[t._v("create table 新表名 like book;")])]),t._v(" "),e("tr",[e("td",[t._v("仅复制表结构但不含主键")]),t._v(" "),e("td",[t._v("create table 新表名 select * from 旧表名;"),e("br"),t._v("或create table 新表名 as (select * from 旧表名);"),e("br"),t._v("或create table 新表名 select * from 旧表名 where key=XX;")])]),t._v(" "),e("tr",[e("td",[t._v("将旧表中的数据灌入新表")]),t._v(" "),e("td",[t._v("insert into 已存在表名 select * from 旧表")])]),t._v(" "),e("tr",[e("td",[t._v("查询输入创建表的DDL语句")]),t._v(" "),e("td",[t._v("show create table 表名;")])]),t._v(" "),e("tr",[e("td",[t._v("清空表数据")]),t._v(" "),e("td",[t._v("truncate table 表名;")])]),t._v(" "),e("tr",[e("td",[t._v("备份数据库")]),t._v(" "),e("td",[t._v("mysqldump -u root -p 被备份数据库名>备份数据库名"),e("br"),t._v("#然后输入密码")])]),t._v(" "),e("tr",[e("td",[t._v("导入或恢复数据库")]),t._v(" "),e("td",[t._v("source 备份数据库的绝对路径")])])])]),t._v(" "),e("h2",{attrs:{id:"_4-数据库表中数据操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-数据库表中数据操作"}},[t._v("#")]),t._v(" 4.数据库表中数据操作")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("行为目的")]),t._v(" "),e("th",[t._v("操作方法")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("清除mysql表中数据")]),t._v(" "),e("td",[t._v("delete from 表名"),e("br"),t._v("# 一条条删除完所有的数据"),e("br"),t._v("truncate table 表名")])]),t._v(" "),e("tr",[e("td",[t._v("删除表中的某些数据")]),t._v(" "),e("td",[t._v("delete from 表名 where XXXX")])])])]),t._v(" "),e("h2",{attrs:{id:"_5-修改表的列与表名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改表的列与表名"}},[t._v("#")]),t._v(" 5.修改表的列与表名")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("行为目的")]),t._v(" "),e("th",[t._v("操作方法")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("给列更名")]),t._v(" "),e("td",[t._v("alter table 表名 change 旧字段名称 新字段名称")])]),t._v(" "),e("tr",[e("td",[t._v("给表更名")]),t._v(" "),e("td",[t._v("alter table 表名 rename 新表名")])]),t._v(" "),e("tr",[e("td",[t._v("修改某表的字段类型即指定是否非空")]),t._v(" "),e("td",[t._v("alter table 表名 change 字段名称 字段类型[是否允许非空]"),e("br"),t._v("alter table 表名 modify 字段名称 字段类型[是否允许非空]")])]),t._v(" "),e("tr",[e("td",[t._v("修改某表的字段名称及指定是否为非空")]),t._v(" "),e("td",[t._v("alter table 表名 change 字段原名称 字段新名称 字段类型[是否允许非空]"),e("br"),t._v("#例如alter table 表名 change birth new_birth varchar(20) NULL")])])])]),t._v(" "),e("h2",{attrs:{id:"_6-修改表中的数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-修改表中的数据"}},[t._v("#")]),t._v(" 6.修改表中的数据")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("行为目的")]),t._v(" "),e("th",[t._v("操作方法")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("增加一个字段")]),t._v(" "),e("td",[t._v("alter table 表名 add column 新增列名 type default value;"),e("br"),t._v("#type指数据类型,value指该字段的默认数值")])]),t._v(" "),e("tr",[e("td",[t._v("更改一个字段的名字"),e("br"),t._v("(可同时修改类型和默认值)")]),t._v(" "),e("td",[t._v("alter table 表名 change 原列(字段)名 新列(字段)名 type default value;")])]),t._v(" "),e("tr",[e("td",[t._v("改变一个字段的默认值")]),t._v(" "),e("td",[t._v("alter table 表名 alter 列(字段)名 set default value;")])]),t._v(" "),e("tr",[e("td",[t._v("改变一个字段的数据类型")]),t._v(" "),e("td",[t._v("alter table 表名 change column 原列名 新列名 type")])]),t._v(" "),e("tr",[e("td",[t._v("向一个表中增加一个列并作为主键")]),t._v(" "),e("td",[t._v("alter table 表名 add column 列名 type auto_increment PRIMARYKEY;")])]),t._v(" "),e("tr",[e("td",[t._v("数据库某表的备份")]),t._v(" "),e("td",[t._v("mysqldump -u root -p 库名 表名 > 备份表名")])]),t._v(" "),e("tr",[e("td",[t._v("导出数据")]),t._v(" "),e("td",[t._v('select_statment into outfile "dest_file"'),e("br"),t._v('#例如select XX,XX from 表名 limit 10 into outfile "home/out.file"')])]),t._v(" "),e("tr",[e("td",[t._v("导入数据")]),t._v(" "),e("td",[t._v('load data infile "filename" into table 表名')])]),t._v(" "),e("tr",[e("td",[t._v("将两个表的数据拼接后插入到另一个表里")]),t._v(" "),e("td",[t._v("insert into 表名 select t1.com1,concat(t1.com2,t2.com1) from t1, t2")])]),t._v(" "),e("tr",[e("td",[t._v("删除字段")]),t._v(" "),e("td",[t._v("alter table 表名 drop column 列名")])])])]),t._v(" "),e("h2",{attrs:{id:"_7-查询表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-查询表"}},[t._v("#")]),t._v(" 7.查询表")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("行为目的")]),t._v(" "),e("th",[t._v("操作方法")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询数值型数据")]),t._v(" "),e("td",[t._v("select * from 表名 where 字段名 > 20;"),e("br"),t._v("#查询谓词: >, =, <, !=, !>, !<, =>, =<")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询字符串")]),t._v(" "),e("td",[t._v('select * from 表名 where 字段名 = "XX"'),e("br"),t._v('select * from 表名 where 字段名 like "刘%"'),e("br"),t._v("# 百分号%代表N个字符,类似于正则里面的.*  ,并且可以放在字符串前后")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询日期型数据")]),t._v(" "),e("td",[t._v('select * from 表名 where date = "2022-03-08"')])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询逻辑性数据")]),t._v(" "),e("td",[t._v('select * from 表名 where type = "T"'),e("br"),t._v("# 逻辑运算符and or not")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询非空数据")]),t._v(" "),e("td",[t._v("select * from tableName where field is not null")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("利用变量查询数值型数据")]),t._v(" "),e("td",[t._v('select * from 表名 where id = "$varlible"')])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("利用变量查询字符串数据")]),t._v(" "),e("td",[t._v('select * from 表名 where name like "%$var%"')])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询前n条记录")]),t._v(" "),e("td",[t._v("select * from 表名 limit 0, n"),e("br"),t._v("# 0,n 也可以变为n,m即指定范围的数据")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询后n条数据")]),t._v(" "),e("td",[t._v("select * from 表名 order by id ASC LIMIT  $n")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询统计结果中的前n条记录")]),t._v(" "),e("td",[t._v("SELECT * ,(yw+sx+wy) AS total FROM tb_score ORDER BY (yw+sx+wy) DESC LIMIT 0,$num")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定时间段的数据")]),t._v(" "),e("td",[t._v("select field from 表名 where field BETWEEN 初始值 AND 终止值")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("按月查询统计数据")]),t._v(" "),e("td",[t._v("select * from 表名 where month(date) = '$_POST[date]' ORDER by date")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询大于指定条件的记录")]),t._v(" "),e("td",[t._v("select * from 表名 where age > $_POST[age] ORDER BY age")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查询结果不显示重复记录")]),t._v(" "),e("td",[t._v("select DISCTINCT 字段名 from 表名 where 查询条件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("NOT 与谓词进行组合条件的查询")]),t._v(" "),e("td",[t._v("NOT BETWEEN ... AND ..."),e("br"),t._v("IS NOT NULL"),e("br"),t._v("IS NULL"),e("br"),t._v("NOT IN")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("显示数据表中的重复记录和记录条数")]),t._v(" "),e("td",[t._v("select name, age, count(*), age from 表名 where age='19' group by date")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("对数据进行降序或升序查询")]),t._v(" "),e("td",[t._v("select 字段名 from 表名 where 条件 order by 字段 DESC; #降序"),e("br"),t._v("select 字段名 from 表名 where 条件 order by 字段 ASC; #升序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("对数据进行多条件查询")]),t._v(" "),e("td",[t._v("select 字段名 from 表名 where 条件 order by 字段1 ASC 字段2 DESC")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("对统计结果进行排序")]),t._v(" "),e("td",[t._v("select name,SUM(price) AS sumprice from 表名 GRPOUP BY name")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("单列数据分组统计")]),t._v(" "),e("td",[t._v("SELECT id,name,SUM(price) AS title,date FROM tb_price GROUP BY pid ORDER BY title DESC"),e("br"),t._v(" # 当分组语句group by排序语句order by同时出现在SQL语句中时，要将分组语句书写在排序语句的前面，否则会出现错误"),e("br")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("多列数据分组统计")]),t._v(" "),e("td",[t._v("SELECT "),e("em",[t._v("，SUM(字段1")]),t._v("字段2) AS (新字段1) FROM 表名 GROUP BY 字段 ORDER BY 新字段1 DESC"),e("br"),t._v(" SELECT id,name,SUM(price*num) AS sumprice  FROM tb_price GROUP BY pid ORDER BY sumprice DESC"),e("br"),t._v(" # group by语句后面一般为不是聚合函数的数列，即不是要分组的列"),e("br")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("多表分组统计")]),t._v(" "),e("td",[t._v("SELECT a.name,AVG(a.price),b.name,AVG(b.price) FROM tb_demo058 AS a,tb_demo058_1 AS b WHERE a.id=b.id GROUP BY b.type;")])])])])])}),[],!1,null,null,null);e.default=r.exports}}]);