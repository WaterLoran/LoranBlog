æµ‹è¯•å·¦ç§»ï¼ˆShift-Left Testingï¼‰æ˜¯ DevOps çš„æ ¸å¿ƒå®è·µä¹‹ä¸€ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯**å°†æµ‹è¯•æ´»åŠ¨æå‰åˆ°è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸé˜¶æ®µ**ï¼Œé€šè¿‡å»ºç«‹å¤šå±‚æ¬¡çš„è´¨é‡é˜²æŠ¤ä½“ç³»ï¼Œå®ç°ç¼ºé™·æ—©å‘ç°ã€ä¿®å¤æˆæœ¬æœ€å°åŒ–ã€‚ä»¥ä¸‹æ˜¯æµ‹è¯•å·¦ç§»çš„å®Œæ•´æŠ€æœ¯ä½“ç³»åŠè½åœ°å®è·µï¼š

---

### ä¸€ã€æµ‹è¯•å·¦ç§»çš„æ ¸å¿ƒæŠ€æœ¯ä½“ç³»
```mermaid
graph LR
A[æµ‹è¯•å·¦ç§»æŠ€æœ¯ä½“ç³»] --> B[éœ€æ±‚ä¸è®¾è®¡é˜¶æ®µ]
A --> C[å¼€å‘é˜¶æ®µ]
A --> D[æŒç»­é›†æˆé˜¶æ®µ]
A --> E[éƒ¨ç½²å‰é˜¶æ®µ]

B --> B1(éœ€æ±‚è¯„å®¡è‡ªåŠ¨åŒ–)
B --> B2(BDD/å®ä¾‹åŒ–éœ€æ±‚)
B --> B3(å¥‘çº¦æµ‹è¯•)

C --> C1(é™æ€ä»£ç åˆ†æ)
C --> C2(å•å…ƒæµ‹è¯•)
C --> C3(å¼€å‘è€…è‡ªæµ‹)

D --> D1(è‡ªåŠ¨åŒ–æµæ°´çº¿)
D --> D2(ç»„ä»¶/é›†æˆæµ‹è¯•)
D --> D3(å®‰å…¨æ‰«æ)

E --> E1(å®¹å™¨åŒ–æµ‹è¯•)
E --> E2(æ€§èƒ½åŸºçº¿æµ‹è¯•)
```

---

### äºŒã€å„é˜¶æ®µå…³é”®æŠ€æœ¯è¯¦è§£

#### 1. éœ€æ±‚ä¸è®¾è®¡é˜¶æ®µ
| **æŠ€æœ¯**              | **å·¥å…·ç¤ºä¾‹**                        | **å®æ–½è¦ç‚¹**                 |
| --------------------- | ----------------------------------- | ---------------------------- |
| **éœ€æ±‚è‡ªåŠ¨åŒ–è¯„å®¡**    | Jira + Xray                         | è‡ªåŠ¨æ£€æŸ¥éœ€æ±‚å¯æµ‹è¯•æ€§ã€å®Œæ•´æ€§ |
| **BDD(è¡Œä¸ºé©±åŠ¨å¼€å‘)** | Cucumber/SpecFlow/Behave            | ç”¨ Gherkin è¯­æ³•ç¼–å†™åœºæ™¯ç”¨ä¾‹  |
| **å¥‘çº¦æµ‹è¯•**          | Pact/PactFlow/Spring Cloud Contract | ä¿éšœå¾®æœåŠ¡æ¥å£å…¼å®¹æ€§         |

**å®è·µæ¡ˆä¾‹**ï¼š
```gherkin
# Cucumber åœºæ™¯ç¤ºä¾‹
Feature: ç”¨æˆ·ç™»å½•åŠŸèƒ½
  Scenario: ä½¿ç”¨æ­£ç¡®å¯†ç ç™»å½•
    Given ç”¨æˆ·æ‰“å¼€ç™»å½•é¡µé¢
    When è¾“å…¥ç”¨æˆ·å "test@example.com" å’Œå¯†ç  "Pass123"
    Then åº”æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯ "æ¬¢è¿å›æ¥"
```

#### 2. å¼€å‘é˜¶æ®µ
| **æŠ€æœ¯**              | **å·¥å…·é“¾**                  | **å…³é”®æŒ‡æ ‡**          |
| --------------------- | --------------------------- | --------------------- |
| **é™æ€ä»£ç åˆ†æ**      | SonarQube/ESLint/Checkstyle | ä»£ç å¼‚å‘³/å®‰å…¨æ¼æ´æ£€æµ‹ |
| **å•å…ƒæµ‹è¯•**          | JUnit/pytest/Jest           | åˆ†æ”¯è¦†ç›–ç‡(â‰¥80%)      |
| **TDD(æµ‹è¯•é©±åŠ¨å¼€å‘)** | ç»“åˆIDE(IntelliJ/VSCode)    | æµ‹è¯•å…ˆè¡Œå¼€å‘          |
| **å¼€å‘è€…è‡ªæµ‹**        | Postman/Testcontainers      | æœ¬åœ°ç¯å¢ƒAPIéªŒè¯       |

**é…ç½®ç¤ºä¾‹** (pom.xml å•å…ƒæµ‹è¯•é…ç½®):
```xml
<plugin>
  <groupId>org.jacoco</groupId>
  <artifactId>jacoco-maven-plugin</artifactId>
  <executions>
    <execution>
      <goals>
        <goal>prepare-agent</goal>
      </goals>
    </execution>
    <execution>
      <id>report</id>
      <phase>test</phase>
      <goals>
        <goal>report</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <rules>
      <rule>
        <limit>
          <counter>BRANCH</counter>
          <value>COVEREDRATIO</value>
          <minimum>0.8</minimum>
        </limit>
      </rule>
    </rules>
  </configuration>
</plugin>
```

#### 3. æŒç»­é›†æˆ(CI)é˜¶æ®µ
| **æŠ€æœ¯**             | **å®ç°æ–¹æ¡ˆ**                     | **è´¨é‡é—¨ç¦**      |
| -------------------- | -------------------------------- | ----------------- |
| **æµæ°´çº¿è‡ªåŠ¨åŒ–æµ‹è¯•** | Jenkins/GitLab CI/GitHub Actions | å¤±è´¥å³é˜»æ–­éƒ¨ç½²    |
| **ç»„ä»¶/é›†æˆæµ‹è¯•**    | Testcontainers/WireMock          | æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–      |
| **å®‰å…¨æ‰«æ**         | OWASP ZAP/Trivy/Snyk             | CVEæ¼æ´åº“å®æ—¶æ£€æµ‹ |

**GitLab CI ç¤ºä¾‹**ï¼š
```yaml
stages:
  - test
  - security

unit_test:
  stage: test
  image: maven:3.8-openjdk-17
  script:
    - mvn test jacoco:report
  artifacts:
    paths:
      - target/site/jacoco/

security_scan:
  stage: security
  image: owasp/zap2docker-stable
  script:
    - zap-baseline.py -t https://${APP_URL} -r report.html
  allow_failure: false  # å®‰å…¨æ‰«æå¤±è´¥é˜»æ–­æµæ°´çº¿
```

#### 4. éƒ¨ç½²å‰é˜¶æ®µ
| **æŠ€æœ¯**         | **å®æ–½æ–¹å¼**                  | **ä»·å€¼**                    |
| ---------------- | ----------------------------- | --------------------------- |
| **å®¹å™¨åŒ–æµ‹è¯•**   | Docker + Kubernetes Test Pods | ç¯å¢ƒä¸€è‡´æ€§éªŒè¯              |
| **æ€§èƒ½åŸºçº¿æµ‹è¯•** | Gatling/k6 + Prometheus       | æ€§èƒ½åŠ£åŒ–å³æ—¶å‘Šè­¦            |
| **é…ç½®éªŒè¯**     | Conftest/OPA                  | åŸºç¡€è®¾æ–½å³ä»£ç (IaC)å®‰å…¨æ£€æŸ¥ |

**æ€§èƒ½æµ‹è¯•è„šæœ¬ç¤ºä¾‹** (k6):
```javascript
import http from 'k6/http';
import { check } from 'k6';

export const options = {
  thresholds: {
    http_req_duration: ['p(95)<500'], // 95%è¯·æ±‚å»¶è¿Ÿ<500ms
  },
};

export default function () {
  const res = http.get('https://api.example.com/v1/users');
  check(res, {
    'is status 200': (r) => r.status === 200,
    'response time OK': (r) => r.timings.duration < 1000
  });
}
```

---

### ä¸‰ã€æµ‹è¯•å·¦ç§»åŸºç¡€è®¾æ–½æ”¯æ’‘
1. **ç»Ÿä¸€æµ‹è¯•æ•°æ®ç®¡ç†**ï¼š
   - ä½¿ç”¨ TestData Service æä¾›æ•°æ®
   - åŸºäº Docker çš„æ•°æ®åº“å¿«ç…§æ¢å¤
2. **è™šæ‹ŸåŒ–æœåŠ¡**ï¼š
   - API Mockï¼šWireMock/Mountebank
   - Service Virtualizationï¼šHoverfly
3. **æµ‹è¯•ç¯å¢ƒæ²»ç†**ï¼š
   - æŒ‰éœ€åˆ›å»ºç¯å¢ƒï¼šKubernetes Namespace
   - ç¯å¢ƒè‡ªåŠ¨å›æ”¶ï¼šTTL(Time-To-Live) æ§åˆ¶å™¨

---

### å››ã€å®æ–½è·¯çº¿å›¾ï¼ˆåˆ†é˜¶æ®µæ¼”è¿›ï¼‰
```mermaid
timeline
    title æµ‹è¯•å·¦ç§»å®æ–½é˜¶æ®µ
    section åŸºç¡€å»ºè®¾
        2024.Q1 ï¼š é™æ€æ‰«æä¸å•å…ƒæµ‹è¯•è¦†ç›–
        2024.Q2 ï¼š è‡ªåŠ¨åŒ–æµæ°´çº¿é›†æˆ
    section æ·±åº¦é›†æˆ
        2024.Q3 ï¼š å¥‘çº¦æµ‹è¯•ä¸BDDè½åœ°
        2024.Q4 ï¼š å…¨é“¾è·¯è™šæ‹ŸåŒ–æµ‹è¯•
    section æ™ºèƒ½æ¼”è¿›
        2025 ï¼š AIè¾…åŠ©æµ‹è¯•ç”Ÿæˆ 
        2026 ï¼š å…¨è‡ªåŠ¨è´¨é‡é¢„æµ‹
```

---

### äº”ã€å…³é”®æˆåŠŸæŒ‡æ ‡
| **æŒ‡æ ‡**           | ç›®æ ‡å€¼  | æµ‹é‡å·¥å…·        |
| ------------------ | ------- | --------------- |
| ç¼ºé™·é€ƒé€¸ç‡         | < 5%    | Jira/Xray       |
| æ„å»ºå¤±è´¥ä¿®å¤æ—¶é—´   | < 2å°æ—¶ | Jenkins/GitLab  |
| å•å…ƒæµ‹è¯•è¦†ç›–ç‡     | â‰¥ 80%   | JaCoCo/Istanbul |
| CIæµæ°´çº¿é€šè¿‡ç‡     | â‰¥ 95%   | å¹³å°å†…ç½®æŠ¥è¡¨    |
| éœ€æ±‚åˆ°æµ‹è¯•ç”¨ä¾‹å‘¨æœŸ | < 1å¤©   | éœ€æ±‚ç®¡ç†ç³»ç»Ÿ    |

---

### å…­ã€é¿å‘æŒ‡å—
1. **ä¸è¦è¿½æ±‚100%æµ‹è¯•è¦†ç›–ç‡** â†’ èšç„¦é«˜é£é™©æ¨¡å—ï¼ˆå¸•ç´¯æ‰˜åŸåˆ™ï¼‰
2. **é¿å…â€œæµ‹è¯•å·¥å…·å†›å¤‡ç«èµ›â€** â†’ é€‰æ‹©ä¸æŠ€æœ¯æ ˆåŒ¹é…çš„å·¥å…·é“¾
3. **å¼€å‘æµ‹è¯•åä½œç“¶é¢ˆ** â†’ å»ºç«‹è´¨é‡å…±åŒä½“ï¼ˆQuality Guildï¼‰
4. **æµ‹è¯•æ•°æ®ç“¶é¢ˆ** â†’ å®æ–½æ•°æ®å·¥å‚æ¨¡å¼ï¼ˆTest Data Factoryï¼‰
5. **ç¯å¢ƒä¸ç¨³å®šé—®é¢˜** â†’ é‡‡ç”¨å®¹å™¨åŒ– + æœåŠ¡è™šæ‹ŸåŒ–åŒä¿éšœ

> ğŸ’¡ **ç»ˆæå»ºè®®**ï¼šæµ‹è¯•å·¦ç§»æœ¬è´¨æ˜¯**è´¨é‡æ–‡åŒ–å˜é©**ï¼ŒæŠ€æœ¯ä½“ç³»éœ€é…å¥—ï¼š
> - è´¨é‡å·¦ç§»çº³å…¥KPIè€ƒæ ¸
> - å¼€å‘äººå‘˜æµ‹è¯•èƒ½åŠ›åŸ¹è®­
> - è´¨é‡é—¨ç¦å¡ç‚¹è‡ªåŠ¨åŒ–
> - è´¨é‡å¯è§†åŒ–çœ‹æ¿å®æ—¶åé¦ˆ

é€šè¿‡ä»¥ä¸Šä½“ç³»åŒ–å»ºè®¾ï¼Œå¯å°†ç¼ºé™·å‘ç°æˆæœ¬é™ä½10å€ï¼Œéƒ¨ç½²é¢‘ç‡æå‡5å€ä»¥ä¸Šï¼Œå®ç°çœŸæ­£çš„é«˜æ•ˆè´¨é‡å†…å»ºã€‚